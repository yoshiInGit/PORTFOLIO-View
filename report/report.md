# プロジェクトの構造どうしてる？

[text-4:アプリやサービスを作っていて、プロジェクト構造をどうするか悩む]
[text-8:DDDやオニオンアーキテクチャなど色々あるが、試してみてこれから書く内容で自分は整理がついた]

# 私のアーキテクチャ
## 全体像
<全体像のイメージ>



## それぞれの要素
### View
[text-6:アプリの見た目を担当する。]

### Action
[text-6:アプリの機能を実行させる。あくまで機能それ自体は実装されず、インフラ層の各機能を調和して実行
する]

### AppState
[text-6:アプリの状態を記憶する。Actionによって変更され、Viewに参照される]

### Domain（インフラ層）
[text-6:ドメイン知識を提供する。各エンティティの情報の定義。ドメイン特有のロジックもここで定義]

### Repository(インフラ層)
[text-6:データの永続化を実行する。各DBとの接続を行う]

### Helper(インフラ層)
[text-6:ドメイン知識ではないが、Action層で実装上、共通化したいロジックやあったら便利なメソッドなど]

# 考察
## レイヤードアーキテクチャと比較
[text-4:レイヤードアーキテクチャの説明]

[text-8:完璧な層構造をめざさない。依存関係ではAction層がインフラ層の各機能に依存し、それ以外の依存関係を作らないことを徹底するだけ。レイヤーというよりはハブ形式]

[text-6:View層は特別扱い。特に実際の実装では使うライブラリに依存するので、各ライブラリでActionの呼び出しと、Stateの参照ができるように工夫する。]

## ほかのアーキテクチャで足りなかったもの
[text-8:クリームアーキテクチャやオニオンアーキテクチャなどで実装しようとしたとき、アプリの状態を管理する要素がなくて困った（例：今開いているタブ、リストの情報など）]

[text-4:アプリの状態を保存する要素って結構重要だと思う。]


## クソコードもこの要素で読むと見やすい。
[text-7:クソコードはこの要素が混在している。分けて読むと、理解がすすむ]

# 課題
## 保守の仕方
[text-9:保守で問題になるのは依存関係、依存はAction層に密集していてシンプルにしているが、もっと完璧を目指すなら、DIを実施すべき]

## DTOの扱い
[text-5:DTO(Data Transfar Object)に説明]
[text-3:すべてのデータの受け渡しをDomainだけでするのは無理がある]
[text-3:DB付近で扱うデータとView付近で使うデータは同じ種類でも、違うデータ構造を要求されることがある]

[text-3:各総でDTOを持っていていいかも]


